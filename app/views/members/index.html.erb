<h1>Members of <%= @group.name %></h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <% if @admin %>
        <th colspan="2">Actions</th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @members.each do |member| %>
      <tr>
        <td>
          <%= link_to member.person.full_name, group_member_path(@group, member) %>
          <% if member.is_leader %>
            (<i class="fa fa-angle-up"></i>)
          <% end %>
        </td>

        <% if @admin and current_person != member.person %>
            <% if member.is_leader %>
              <td>
                <%= link_to 'Demote', demote_group_member_path(@group, member), method: :post, data: { confirm: 'Are you sure?' } %>
              </td>
            <% else %>
              <td>
                <%= link_to 'Promote', promote_group_member_path(@group, member), method: :post, data: { confirm: 'Are you sure?' } %>
              </td>
            <% end %>
            <td>
              <%= link_to 'Remove', group_member_path(@group, member), method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>
          <% else %>
            <td></td><td></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Member', new_group_member_path(@group) %> |
<%= link_to 'Invite Member', group_invite_path(@group) %>
