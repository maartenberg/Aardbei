<h2><%= @activity.public_name %></h2>

<ul>
  <% if @activity.secret_name %>
  <li>Secretly <%= @activity.secret_name %></li>
  <% end %>
  <li>Description:<%= @activity.description %></li>
  <li>Location:<%= @activity.location %></li>
  <li>Start: <%= @activity.start %> - <%= @activity.end %></li>
  <li>Deadline: <%= @activity.deadline %></li>
</ul>

<h2>Participants (<%= @activity.participants.count %> <%= render partial: "state_counts", locals: {counts:@activity.state_counts}%>)</h2>
<table class="table table-bordered">
  <% @activity.participants.each do |p| %>
    <tr class="<%= p.row_class %>" data-person-id="<%= p.person.id %>" data-activity-id="<%= @activity.id %>">
      <td>
        <%= p.person.full_name %>
        <% if p.is_organizer %><i class="fa fa-star-o"></i><% end %>
      </td>
      <td>
        <%=
          editable p, :notes, url: presence_group_activity_path(@activity.group, @activity, person_id: p.person_id), title: "Notes", value: p.notes, emptytext: "--"
        %>
      </td>
      <td>
        <%= render partial: "activities/presence_buttons", locals: {activity: @activity, person: p.person, state: p.attending} %>
  <% end %>
</table>

<%= link_to 'Edit', edit_group_activity_path(@group, @activity) %> |
<%= link_to 'Back', group_activities_path(@group) %>
